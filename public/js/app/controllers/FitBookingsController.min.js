"use strict";fit_bookings.controller("FitBookingsController",["$scope","$route","$http","$uibModal","$window","fitbookingsModel","$location","$cookies",function($scope,$route,$http,$uibModal,$window,fitbookingsModel,$location,$cookies){$scope.isDateFromFilterOpened=!1,$scope.isDateToFilterOpened=!1;var date=new Date,startMonth=new Date(date.getFullYear(),date.getMonth(),1),endMonth=new Date(date.getFullYear(),date.getMonth()+1,0);$scope.openDateFromFilter=function(){0==$scope.isDateFromFilterOpened?$scope.isDateFromFilterOpened=!0:$scope.isDateFromFilterOpened=!1},$scope.openDateToFilter=function(){0==$scope.isDateToFilterOpened?$scope.isDateToFilterOpened=!0:$scope.isDateToFilterOpened=!1},$scope.filter={},$scope.filter.dateFrom=startMonth,$scope.filter.dateTo=endMonth,fitbookingsModel.getBookings($scope.filter).then(function(results){$scope.fitbookings=results.data}).catch(function(error){401==error.status?($location.path("/"),$cookies.remove("apiToken")):console.log("Error occurred retrieving bookings.")}),$scope.filterBookings=function(filter){fitbookingsModel.getBookings(filter).then(function(results){$scope.fitbookings=results.data}).catch(function(error){401==error.status?($location.path("/"),$cookies.remove("apiToken")):console.log("Error occurred retrieving bookings.")})},$scope.fitbookingDetails=function(fitBookingId){$location.path("/fitbookings/forms/"+fitBookingId)}}]).controller("FitBookingsDetailsController",["$scope","$route","$http","$uibModal","$window","fitbookingsModel","$location","$cookies",function($scope,$route,$http,$uibModal,$window,fitbookingsModel,$location,$cookies){var fitBookingId=$route.current.params.fitBookingId;fitbookingsModel.getBookingDetails(fitBookingId).then(function(results){$scope.fitbookings=results.data[0],$scope.hotels=[],angular.forEach($scope.fitbookings.calls,function(v,k){$scope.hotels.push(v.hotels)})}).catch(function(error){401==error.status?($location.path("/"),$cookies.remove("apiToken")):console.log("Error occurred retrieving bookings details.")})}]).controller("WelcomeController",["$scope","$route","$http","$uibModal","$window","fitbookingsModel","$location","$cookies",function($scope,$route,$http,$uibModal,$window,fitbookingsModel,$location,$cookies){$scope.fitBookingId=$route.current.params.fitBookingId,fitbookingsModel.getWelcomeSign($scope.fitBookingId).then(function(results){$scope.welcomeSign=results.data}).catch(function(error){401==error.status?($location.path("/"),$cookies.remove("apiToken")):console.log("Error occurred retrieving welcome sign.")})}]);