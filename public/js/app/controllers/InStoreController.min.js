"use strict";in_store.controller("InStoreController",["$scope","$rootScope","$route","$http","$uibModal","$window","inStoreModel","$location",function($scope,$rootScope,$route,$http,$uibModal,$window,inStoreModel,$location){var fitBookingId=$route.current.params.fitBookingId;console.log("In Store Controller JS",fitBookingId),$scope.inStore={},$scope.inStore.fitBookingId=fitBookingId,$scope.inStore.representative,$scope.inStore.addRemoveAttraction,$scope.inStore.signature=$("#InStoreForms_signature").val(),$scope.inStore.tourLeaderSignature=$("#InStoreForms_tour_leader_signature").val(),$scope.inStore.attractions=[],$scope.inStore.attractions.push({attraction:""}),$scope.inStore.names=[],$scope.inStore.names.push({name:""}),$scope.addAttraction=function(){$scope.inStore.attractions.push({attraction:""})},$scope.addName=function(){$scope.inStore.names.push({name:""})},$("#Signature").signature({syncField:$("#Signature").next("input")}),$("#TourLeaderSignature").signature({syncField:$("#TourLeaderSignature").next("input")}),$(".clearButton a").click(function(e){e.preventDefault(),$(this).parents(".sigWrapper").find(".sigPad").signature("clear"),$(this).parents(".sigWrapper").find(".sigPad").next("input").val("")}),$scope.submitForm=function(inStore){$scope.inStore.signature=$("#InStoreForms_signature").val(),$scope.inStore.tourLeaderSignature=$("#InStoreForms_tour_leader_signature").val(),inStoreModel.submitForm(inStore).then(function(results){void 0!==results.data.errors&&Object.keys(results.data.errors).length>0?$scope.errors=results.data.errors:("true"==results.data?$rootScope.showNotification("自费旅游项目协议书已成功提交。","success"):$rootScope.showNotification("自费旅游项目协议书未提交。","error"),$location.path("/fitbookings/forms/"+$scope.inStore.fitBookingId))}).catch(function(error){console.log(error),401==error.status?$location.path("/"):console.log("Error occurred in saving in-store form.")})}}]);